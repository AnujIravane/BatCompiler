(:main
  (:main
    0 1
    (rdi <- 21)
    (rsi <- 1)
    (call allocate 2)
    ((mem rax 8) <- 5)
    ((mem rax 16) <- 3)
    ((mem rax 24) <- 11)
    ((mem rax 32) <- 7)
    ((mem rax 40) <- 9)
    ((mem rax 48) <- 19)
    ((mem rax 56) <- 15)
    ((mem rax 64) <- 13)
    ((mem rax 72) <- 21)
    ((mem rax 80) <- 17)
    ((mem rsp 0) <- rax)
    (rdi <- rax)
    (call print 1)
    ((mem rsp -8) <- :bubble_sort_ret)
    (rdi <- (mem rsp 0))
    (call :bubble_sort 1)
    :bubble_sort_ret
    (rdi <- rax)
    (call print 1)
    (return))
  (:bubble_sort
    1 5
    (rcx <- 1)
    ((mem rsp 0) <- rdi)
    (r9 <- (mem rdi 0))
    (r9 <<= 3)
    (r9 += rdi)
    ((mem rsp 8) <- r9)
    :whilestart
    (cjump rcx = 1 :whilebody :whileend)
    :whilebody
    (rcx <- 0)
    (r8 <- (mem rsp 0))
    (r8 += 8)
    :forstart
    (cjump r8 < r9 :forbody :forend)
    :forbody
    (r10 <- r8)
    (r10 += 8)
    (rdi <- (mem r8 0))
    (rsi <- (mem r10 0))
    (cjump rsi < rdi :need_to_swap :continue)
    :need_to_swap
    (rdi <- r8) (rsi <- r10) (rcx <- 1)
    ((mem rsp 8) <- rcx)
    ((mem rsp 16) <- r8)
    ((mem rsp 24) <- r9)
    ((mem rsp 32) <- r10)
    ((mem rsp -8) <- :swap_ret)
    (call :swap_pair 2)
    :swap_ret
    (rcx <- (mem rsp 8))
    (r8 <- (mem rsp 16))
    (r9 <- (mem rsp 24))
    (r10 <- (mem rsp 32))
    :continue
    (r8 += 8) 
    (goto :forstart)
    :forend
    (goto :whilestart)
    :whileend
    (rax <- (mem rsp 0))
    (return))
  (:swap_pair
    2 0
    (r10 <- (mem rdi 0))
    (r11 <- (mem rsi 0))
    ((mem rdi 0) <- r11)
    ((mem rsi 0) <- r10)
    (return))    
)
