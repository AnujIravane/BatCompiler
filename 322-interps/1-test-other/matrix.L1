(:main
  (:main
    0 2 
    (rdi <- 5)
    (rsi <- 3)
    (call allocate 2)
    ((mem rax 16) <- 5)
    (rdi <- 5)
    (rsi <- rax)
    (call allocate 2)
    ((mem rsp 0) <- rax)
    (rdi <- 5)
    (rsi <- 7)
    (call allocate 2)
    ((mem rax 16) <- 9)
    (rdi <- (mem rsp 0))
    ((mem rdi 16) <- rax)
    (call print 1)
    (rdi <- 5)
    (rsi <- 7)
    (call allocate 2)
    ((mem rax 16) <- 9)
    (rdi <- 5)
    (rsi <- rax)
    (call allocate 2)
    ((mem rsp 8) <- rax)
    (rdi <- 5)
    (rsi <- 7)
    (call allocate 2)
    ((mem rax 16) <- 9)
    (rdi <- (mem rsp 8))
    ((mem rdi 16) <- rax)
    (call print 1)
    ((mem rsp -8) <- :add_matrix_ret)
    (rdi <- (mem rsp 0))
    (rsi <- (mem rsp 8))
    (call :add_matrix 2)
    :add_matrix_ret
    (rdi <- rax)
    (call print 1)
    (return))
  (:add_matrix
    2 4
    (r8 <- (mem rdi 8))
    (r9 <- (mem rdi 16))
    (r10 <- (mem rsi 8))
    (r11 <- (mem rsi 16))
    (rax <- rdi)
    (rcx <- (mem r8 8))
    (rdx <- (mem r10 8))
    (rcx -= 1)
    (rcx >>= 1)
    (rdx -= 1)
    (rdx >>= 1)
    (rcx += rdx)
    (rcx *= 2)
    (rcx += 1)
    ((mem r8 8) <- rcx)
    (rcx <- (mem r9 8))
    (rdx <- (mem r11 8))
    (rcx -= 1)
    (rcx >>= 1)
    (rdx -= 1)
    (rdx >>= 1)
    (rcx += rdx)
    (rcx *= 2)
    (rcx += 1)
    ((mem r9 8) <- rcx)
    (rcx <- (mem r8 16))
    (rdx <- (mem r10 16))
    (rcx -= 1)
    (rcx >>= 1)
    (rdx -= 1)
    (rdx >>= 1)
    (rcx += rdx)
    (rcx *= 2)
    (rcx += 1)
    ((mem r8 16) <- rcx)
    (rcx <- (mem r9 16))
    (rdx <- (mem r11 16))
    (rcx -= 1)
    (rcx >>= 1)
    (rdx -= 1)
    (rdx >>= 1)
    (rcx += rdx)
    (rcx *= 2)
    (rcx += 1)
    ((mem r9 16) <- rcx)
    (return)) 
)
